const S=typeof window=="object"?window:{},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),g={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63,"-":62,_:63},C=h=>{for(var r=[],e=0;e<h.length;e++){var o=h.charCodeAt(e);o<128?r[r.length]=o:(o<2048?r[r.length]=192|o>>6:(o<55296||57344<=o?r[r.length]=224|o>>12:(o=65536+((1023&o)<<10|1023&h.charCodeAt(++e)),r[r.length]=240|o>>18,r[r.length]=128|o>>12&63),r[r.length]=128|o>>6&63),r[r.length]=128|63&o)}return r},A=h=>{var r,e,o,f,n=[],t=0,a=h.length;h.charAt(a-1)==="="&&--a,h.charAt(a-2)==="="&&--a;for(var d=0,l=a>>2<<2;d<l;)r=g[h.charAt(d++)],e=g[h.charAt(d++)],o=g[h.charAt(d++)],f=g[h.charAt(d++)],n[t++]=255&(r<<2|e>>>4),n[t++]=255&(e<<4|o>>>2),n[t++]=255&(o<<6|f);return a-=l,a==2?(r=g[h.charAt(d++)],e=g[h.charAt(d++)],n[t++]=255&(r<<2|e>>>4)):a==3&&(r=g[h.charAt(d++)],e=g[h.charAt(d++)],o=g[h.charAt(d++)],n[t++]=255&(r<<2|e>>>4),n[t++]=255&(e<<4|o>>>2)),n},v=h=>{for(var r,e,o,f="",n=h.length,t=0,a=3*parseInt(n/3);t<a;)r=h[t++],e=h[t++],o=h[t++],f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[63&(e<<2|o>>>6)]+c[63&o];return n-=a,n==1?(r=h[t],f+=c[r>>>2]+c[r<<4&63]+"=="):n==2&&(r=h[t++],e=h[t],f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[e<<2&63]+"="),f};var m,i=S.btoa,s=S.atob,u=i?(m=h=>{for(var r="",e=0;e<h.length;e++){var o=h.charCodeAt(e);o<128?r+=String.fromCharCode(o):o<2048?r+=String.fromCharCode(192|o>>6)+String.fromCharCode(128|63&o):o<55296||57344<=o?r+=String.fromCharCode(224|o>>12)+String.fromCharCode(128|o>>6&63)+String.fromCharCode(128|63&o):(o=65536+((1023&o)<<10|1023&h.charCodeAt(++e)),r+=String.fromCharCode(240|o>>18)+String.fromCharCode(128|o>>12&63)+String.fromCharCode(128|o>>6&63)+String.fromCharCode(128|63&o))}return i(r)},h=>{var r=s(h.trim("=").replace(/-/g,"+").replace(/_/g,"/"));if(!/[^\x00-\x7F]/.test(r))return r;for(var e,o,f="",n=0,t=r.length,a=0;n<t;)if((e=r.charCodeAt(n++))<=127)f+=String.fromCharCode(e);else{if(191<e&&e<=223)o=31&e,a=1;else if(e<=239)o=15&e,a=2;else{if(!(e<=247))throw"not UTF-8";o=7&e,a=3}for(var d=0;d<a;++d){if((e=r.charCodeAt(n++))<128||191<e)throw"not UTF-8";o=(o<<6)+(63&e)}if(55296<=o&&o<=57343||1114111<o)throw"not UTF-8";o<=65535?f+=String.fromCharCode(o):(o-=65536,f=(f+=String.fromCharCode(55296+(o>>10)))+String.fromCharCode(56320+(1023&o)))}return f}):(i=h=>{for(var r,e,o,f="",n=h.length,t=0,a=3*parseInt(n/3);t<a;)r=h.charCodeAt(t++),e=h.charCodeAt(t++),o=h.charCodeAt(t++),f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[63&(e<<2|o>>>6)]+c[63&o];return n-=a,n==1?(r=h.charCodeAt(t),f+=c[r>>>2]+c[r<<4&63]+"=="):n==2&&(r=h.charCodeAt(t++),e=h.charCodeAt(t),f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[e<<2&63]+"="),f},m=h=>{for(var r,e,o,f="",n=C(h),h=n.length,t=0,a=3*parseInt(h/3);t<a;)r=n[t++],e=n[t++],o=n[t++],f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[63&(e<<2|o>>>6)]+c[63&o];return h-=a,h==1?(r=n[t],f+=c[r>>>2]+c[r<<4&63]+"=="):h==2&&(r=n[t++],e=n[t],f+=c[r>>>2]+c[63&(r<<4|e>>>4)]+c[e<<2&63]+"="),f},s=h=>{var r,e,o,f,n="",t=h.length;h.charAt(t-1)==="="&&--t,h.charAt(t-2)==="="&&--t;for(var a=0,d=t>>2<<2;a<d;)r=g[h.charAt(a++)],e=g[h.charAt(a++)],o=g[h.charAt(a++)],f=g[h.charAt(a++)],n+=String.fromCharCode(255&(r<<2|e>>>4))+String.fromCharCode(255&(e<<4|o>>>2))+String.fromCharCode(255&(o<<6|f));return t-=d,t==2?(r=g[h.charAt(a++)],e=g[h.charAt(a++)],n+=String.fromCharCode(255&(r<<2|e>>>4))):t==3&&(r=g[h.charAt(a++)],e=g[h.charAt(a++)],o=g[h.charAt(a++)],n+=String.fromCharCode(255&(r<<2|e>>>4))+String.fromCharCode(255&(e<<4|o>>>2))),n},h=>{for(var r,e,o="",f=A(h),n=f.length,t=0,a=0;t<n;)if((r=f[t++])<=127)o+=String.fromCharCode(r);else{if(191<r&&r<=223)e=31&r,a=1;else if(r<=239)e=15&r,a=2;else{if(!(r<=247))throw"not UTF-8";e=7&r,a=3}for(var d=0;d<a;++d){if((r=f[t++])<128||191<r)throw"not UTF-8";e=(e<<6)+(63&r)}if(55296<=e&&e<=57343||1114111<e)throw"not UTF-8";e<=65535?o+=String.fromCharCode(e):(e-=65536,o=(o+=String.fromCharCode(55296+(e>>10)))+String.fromCharCode(56320+(1023&e)))}return o});const w=(h,r)=>{var e=typeof h!="string";return e&&h.constructor===S.ArrayBuffer&&(h=new Uint8Array(h)),(e?v:!r&&/[^\x00-\x7F]/.test(h)?m:i)(h)},p=(h,r,e="string")=>(e==="bytes"?A:r?s:u)(h);export{p as d,w as e};
